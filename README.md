# Gemini AI Chess Master

Google Gemini API (LLM) を搭載した、対話型のチェスゲームアプリケーションです。
プレイヤーは白番を持ち、AI (Gemini) が黒番として対戦します。
AIは単に手を指すだけでなく、その手を選んだ理由を日本語で解説します。

## 主な機能

- **AI対戦**: Google Gemini 2.5 Flash モデルを利用した高速かつ賢いAI。
- **解説機能**: AIが手を指すたびに、なぜその手を選んだのかを日本語で解説します。
- **難易度調整**: 初心者 (Beginner) から グランドマスター (Grandmaster) まで4段階の調整が可能。
- **レスポンシブデザイン**: PC、タブレット、スマートフォンで快適にプレイ可能。
- **クリック＆タップ操作**: ドラッグ操作を排除し、クリック（タップ）で移動元・移動先を選択する確実な操作方法を採用。
- **モダンUI**: Tailwind CSS を使用したダークモードベースの洗練されたデザイン。

## 技術スタック

- **Frontend**: React 18, TypeScript, Vite (想定)
- **Styling**: Tailwind CSS
- **Chess Logic**: chess.js
- **Chess UI**: react-chessboard
- **AI**: @google/genai SDK (Gemini API)
- **Icons**: lucide-react

## セットアップ手順

このプロジェクトを実行するには、Gemini APIキーが必要です。

1. **APIキーの取得**:
   [Google AI Studio](https://aistudio.google.com/) からAPIキーを取得してください。

3. **環境変数**:
   プロジェクトのルートに `.env.local` ファイルを作成し、`GEMINI_API_KEY` を設定してください。
   
   ```bash
   GEMINI_API_KEY="あなたのAPIキー"
   ```

## 難易度調整の仕組み

このゲームでは、LLM (Gemini) へのプロンプト（指示）とパラメータを調整することで、4段階の難易度を実現しています。

- **Beginner (初心者)**:
  - **Persona**: 初心者相手であることを意識し、時々最適ではない単純な手を選びます。過度な先読みは避けるように指示しています。
  - **Temperature**: 0.5 (少し創造的/ランダム性を持たせることで、完璧さを下げる)

- **Intermediate (中級者)**:
  - **Persona**: 堅実な手を選びますが、複雑な戦術は見逃すことがあるように指示しています。
  - **Temperature**: 0.5

- **Advanced (上級者)**:
  - **Persona**: 可能な限り最強の手を選ぶように指示しています。
  - **Temperature**: 0.5

- **Grandmaster (グランドマスター)**:
  - **Persona**: 可能な限り最強の手を選ぶように指示しています。
  - **Temperature**: 0.1 (ランダム性を極力排除し、論理的で正確な回答を優先)

すべての難易度において、有効な手 (Valid Moves) のリストから選択するように制約を設けていますが、難易度に応じて「あえて甘い手を選ぶ」か「最強の手を選ぶ」かの振る舞いを変えています。

3. **依存関係のインストール**:
   ```bash
   npm install react react-dom chess.js react-chessboard @google/genai lucide-react tailwindcss
   ```

4. **起動**:
   ```bash
   npm run dev
   ```

## 遊び方

1. **ゲーム開始**: ページを開くと自動的にゲームがセットアップされます。
2. **手番**: あなたは白番です。
   - **操作方法**:
     1. 動かしたい駒をクリック（タップ）します。移動可能なマスがハイライトされます。
     2. ハイライトされたマスのいずれかをクリック（タップ）して移動を確定します。
     3. 移動できない場所や、別の場所をクリックすると選択が解除されます（または別の自分の駒を選択します）。
3. **AIのターン**: あなたが指し終わると、AIが思考を開始します。思考中はインジケーターが表示されます。
4. **解説を読む**: AIが手を指すと、画面右側（スマホでは下部）にその手の解説が表示されます。
5. **難易度変更**: ゲーム中でも右側のパネルから難易度を変更できます（次のAIの手番から反映されます）。
6. **待った/リセット**: 「待った」ボタンで一手戻るか、「リセット」で最初からやり直せます。

## 今後の展望

- **ユーザーアカウント機能**: 戦績の保存や過去の対局履歴の閲覧機能。
- **対人戦モード**: オンラインで他のプレイヤーと対戦できる機能。
- **AIペルソナの拡充**: 「攻撃的」「守備的」など、より多様な棋風を持つAIの追加。
- **棋譜分析機能**: 対局終了後に、より詳細な形勢判断や改善点を提示する機能。
- **PWA (Progressive Web App) 対応**: アプリとしてインストールし、オフラインでも一部機能を利用可能に。
- **音声対話**: 音声で手を指示したり、解説を読み上げたりする機能。


## ライセンス

MIT License